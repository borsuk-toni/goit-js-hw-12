{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImages(searchValue, page = 1) {\n    const res = await axios.get('', {\n        params: {\n            key: '42343629-db0a88f68e5938b107ae69266',\n            q: `${searchValue.trim()}`\n                .split(' ')\n                .map(value => {\n                    return value.toLowerCase().trim();\n                })\n                .join('+'),\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: 15\n        }\n    });\n\n    return res.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250,\n            });\n\nexport function galleryMarkup(el) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = el;\n    return `<li class=\"item\"> <a class=\"gallery-item\" href=\"${largeImageURL}\">\n                 <img class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"/>\n            </a>\n            <ul class=\"descr\">\n            <li class=\"descr-item\"><p class=\"descr-title\">Likes<span class=\"descr-value\">${likes}</span></p></li>\n            <li class=\"descr-item\"><p class=\"descr-title\">Views<span class=\"descr-value\"> ${views}</span></p></li>\n            <li class=\"descr-item\"><p class=\"descr-title\">Comments<span class=\"descr-value\"> ${comments}</span></p></li>\n            <li class=\"descr-item\"><p class=\"descr-title\">Downloads<span class=\"descr-value\"> ${downloads}</span></p></li>\n            </ul>\n            </li>`;\n}\n\nexport function createGallery(elems) {\n    const markup = elems.hits\n        .map(el => {\n            return galleryMarkup(el);\n        })\n        .join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\n// return elems.map(galleryMarkup).join('');","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet input;\nlet currentPage;\nlet maxPage;\n\nloader.style.display = 'none';\nloadMoreBtn.classList.add('hidden');\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n    \nasync function onFormSubmit(e) {\n    e.preventDefault();\n\n    gallery.innerHTML = '';\n    input = e.target.elements.input.value.trim();\n\n\n    if (input === '') {\n        showError('Please enter a valid request!');\n        return;\n    }\n\n    loader.style.display = 'block';\n    currentPage = 1;\n\n    try {\n        const data = await getImages(input, currentPage);\n        maxPage = Math.ceil(data.totalHits / 15);\n        loadMoreBtn.classList.remove('hidden');\n        if (currentPage >= maxPage) {\n            loadMoreBtn.classList.add('hidden');\n        } else {\n            loadMoreBtn.classList.remove('hidden');\n        }\n        handleGalleryResponse(data);\n    } catch (error) {\n        console.error(error);\n        showError('Unable to get images');\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nasync function onLoadMoreClick() {\n    loader.style.display = 'block';\n    currentPage++;\n\n    try {\n        const data = await getImages(input, currentPage);\n        handleGalleryResponse(data);\n        scroll();\n    } catch (error) {\n        console.error(error);\n        showError('Unable to get images');\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nfunction handleGalleryResponse(data) {\n    if (data.hits.length === 0) {\n        showError('Sorry, there are no images matching your search query. Please try again!');\n        return;\n    } else {\n        createGallery(data);\n    }\n\n    if (currentPage >= maxPage) {\n        loadMoreBtn.classList.add('hidden');\n        showError('We are sorry, but you have reached the end of search results.');\n    } else {\n        loadMoreBtn.classList.remove('hidden');\n    }\n}\n\nfunction showError(msg) {\n    iziToast.error({\n        message: msg,\n        position: \"topRight\",        \n  });\n}\n\nfunction scroll() {\n    const height = gallery.firstElementChild.getBoundingClientRect().height;\n    scrollBy({\n        top: height * 2,\n        behavior: 'smooth'\n    });\n}"],"names":["axios","getImages","searchValue","page","value","gallery","lightbox","SimpleLightbox","galleryMarkup","el","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","elems","markup","form","loader","loadMoreBtn","input","currentPage","maxPage","onFormSubmit","onLoadMoreClick","showError","data","handleGalleryResponse","error","scroll","msg","iziToast","height"],"mappings":"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"}